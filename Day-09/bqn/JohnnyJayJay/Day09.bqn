Surround â† {â‰âŒ½ğ•¨âˆ¾Ë˜ğ•©}âŸ4 # Surround a rank 2 matrix ğ•© with ğ•¨, increasing its dimensions by 2 on each axis
adj â† -âŠ¸âˆ¾âŸ¨1â€¿0, 0â€¿1âŸ© # The directional vectors to get adjacent positions
Positions â† â¥Šâˆ˜(âŠ‘((1+â‹ˆâŒœ)â—‹(â†•-âŸœ2))1âŠ¸âŠ‘)â‰¢ # Returns a flat list of all x,y positions in a given matrix
LowPoints â† { (âˆ§Â´âŠ‘âŸœğ•©<(âŠ‘âŸœğ•©Â¨adj+<))Â¨ Positions ğ•©}/Positions # Returns a list of low point positions

# A breadth-first-search implementation that sums the amount of nodes it encounters
Bfs â† { g B âŸ¨f, vâŸ© :
  {
     0=â‰ f ? 0 ;
     (â‰ f) + g B âŸ¨â·((9â‰ âŠ‘âŸœg)Â¨âˆ§(Â¬âˆŠâŸœv))âŠ¸/(â¥Šf+âŒœadj), â·fâˆ¾vâŸ©
  }
}

PartOne â† +Â´1+{âŠ‘âŸœğ•©Â¨ ğ•¨} # Given a list of low points ğ•¨ and a matrix ğ•©, return their sum of risk levels
PartTwo â† {Ã—Â´3â†‘âˆ¨(ğ•©âŠ¸Bfs â‹ˆâ‹ˆâŸ¨âŸ©Ë™)Â¨ ğ•¨} # Given a list of low points ğ•¨ and a matrix ğ•©, calculate the product of the 3 largest basin sizes

Parse â† > -âŸœ'0'âš‡Â¯2 # Parse a list of input lines to a matrix
input â† 9 Surround Parse â€¢FLines âŠ‘ â€¢args
l â† LowPoints input
â€¢Out l PartOne input
â€¢Out l PartTwo input
